{% schema %}
  {
    "name": "Product Image Grid",
    "settings": [

      {
         "type": "richtext",
         "id": "section_title",
         "label": "Section Title",
         "default": "<p>Featured Products</p>"
      },

       {
         "type": "product_list",
         "id": "products",
         "label": "Select Products",
         "limit": 6
      },
    ],
    "presets": [
      {
      "name": "Product Image Grid",
      "category": "Custom Sections;"
      }
    ]
  }
{% endschema %}

<h2 class="product-section-title">{{ section.settings.section_title }}</h2>

<div class="product-grid">
{% for product in section.settings.products limit: 6 %}
  <div class="product-grid-item">
    <img src="{{ product.images[0] | img_url: 'large' }}" alt ="{{ product.title }}">
    <button class="quick-view-btn" data-product= '{{ product | json }}'>+</button>
  </div>
  {% endfor %}
</div>

<div id="product-modal" class="modal">
  <div class="modal-content">
    <span class="close">&item;</span>
    <div id="modal-body">Loading...</div>
  </div>
</div>

<style>

  .product-section-title{
    text-align: left;
    padding-left: 20px;
  }
  .close{
    float: right;
    cursor: pointer;
    font-size: 24px;
  }

  .product-grid{
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 15px;
    padding: 20px;
  }

  .product-grid-item{
    position: relative;
    overflow: hidden;
  }

  .product-grid-item img{
    width: 100%;
    height: auto;
    object-fit: cover;
  }

  .quick-view-btn{
    position: absolute;
    top: 10px;
    right: 10px;
    background: white;
    border: none;
    width: 30px;
    font-size: 18px;
    cursor: pointer;
    border-radius: 50%;
  }

  .modal{
    display: none;
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5);
    align-item: center;
    justify-content: center;
  }

  .modal-content{
    background-color: white;
    padding: 20px;
    width: 50%;
    max-width: 400px;
  }

</style>

 <script>
  document.addEventListerner("DOMContentLoaded" , function(){
    let modal = document.getElementById("product-modal");
    let modalBody = document.getElementById("modal-body");
    let closeModal = doucment.querySelector(".close");

    document.querySelectorAll(".quick-view-btn").forEach(button => {
      button.addEventListener("click",function(){
        let product = JSON.parse(this.getAttribute("data-product"));

        let sizes = [...new set(product.variants.map(variant => variant.option1))];
         let colors = [...new set(product.variants.map(variant => variant.option2))];

        modalBody.innerHTML = `
           <div class="popup" style="display: flex; margin-top: 30px;">
           <div class="column">
            <img src="${product.images[0] ? product.images[0] : 'https://via.placeholder.com/200'}" width="90%" height="80%" style="margin-top: 20px; object-fit: cover;"
          </div>
        <div class="column">
          <h2 style="font-size: 16px;">${product.title}</h2>
           <p style="font-size: 16px;"><strong>${product.price} ${product.currency}</strong></p>                    
            <h3 style="font-size: 12px;">${product.title}</h3>
    </div>
    </div>
    </div>   

     <div>
     <div>Color:</div>
     <div class="color-variants">
      ${colors.map(color => `
        <div class ="color-radio">
           <div class="colour" style=" width: 10px; border: 1px solid black; background-color: ${color};"> </div>
           <input type="radio" id="color-${color}" name="color" value="${color}">
           <label for="color-${color}">${color}</label>
           </div>
           `).join('')}
           </div>
           </div>

           <div class="select_size" style="margin-top: 10px;">Size:</div>
           <div class="dropdown-container">
           <select id="size-selector">
            <option value="default">Choose your size</option>
            ${sizes.map(size => `
              <option value="${size}">${size}</option>
                        `).join('')}
             </select>                                            
             </div>
             </div>
             
             </div>
             <button class="add-to-cart" data-product-id="">ADD TO CART <span class="arrow"> ‚ü∂ </span></button>
             </div>
             `;

        modal.classList.add("show");
        
         

      
        
</script>



